<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
</head>
<body>
    <script>
        function Solve(args) {
            //var args = [
            //        '7 8',
            //        'dr dl dr ur ul',
            //        'dr dr ul ur ur',
            //        'dl dr ur dl ur']
            //;
            for (var i = 1; i < args.length; i++) {
                args[i] = args[i].split(' ');
            }
            var N = parseInt(args[0].split(' ')[0]);
            var M = parseInt(args[0].split(' ')[1]);

            var field = [];
            var fieldCheck = [];
            var countCells = 1;

            for (var row = 0; row < N; row++) {
                field[row] = [];
                fieldCheck[row] = [];
                for (var col = 0; col < M; col++) {
                    field[row][col] = countCells;
                    fieldCheck[row][col] = false;
                    countCells++;
                }
                countCells = Math.pow(2, (row + 1));
            }

            var SUM_OF_NUMBERS_IN_THE_PATH = 0;

            var row = 0;
            var col = 0;

            while (true) {

                SUM_OF_NUMBERS_IN_THE_PATH += field[row][col];
                fieldCheck[row][col] = true;
                var currentPosition = args[row + 1][col];

                switch (currentPosition) {
                    case 'dl':
                        col -= 1;
                        row += 1;
                        break;
                    case 'dr':
                        col += 1;
                        row += 1;
                        break;
                    case 'ur':
                        col += 1;
                        row -= 1;
                        break;
                    case 'ul':
                        col -= 1;
                        row -= 1;
                        break;
                }

                if (row < 0 || row >= N || col < 0 || col >= M) {
                    return 'successed with ' + SUM_OF_NUMBERS_IN_THE_PATH;
                }
                if (fieldCheck[row][col] == true) {
                    return 'failed at (' + row + ', ' + col + ')';

                }

            }


        }
        document.writeln(Solve());
    </script>
</body>
</html>
